# 路由

## 1. 路由的基本概念

### 1.1 路由的两种机制

- 路由：决定数据包从来源到目的地的路径
- 转送：将输入端的数据转移到合适的输出端

### 1.2 路由表

路由的本质是一个映射表，决定了数据包的走向

### 1.3  路由的发展阶段

后端路由阶段：服务器直接渲染好对象的 html 页面返回个客户端进行展示。

前后端路由阶段：随着 Ajax 的出现，有了前后端分离的开发模式，后端只提供 API 来返回数据，前端通过 Ajax 获取数据，并通过 js 渲染。

单页面富应用阶段（SAP）：SAP 主要的特点是在前后端分离的基础上加了一层前端路由，由前端维护一套路由规则

## 2. 使用 JavaScript 操作路由

```javascript
location.href = "/aaa" //会刷新页面
location.hash = "/aaa"  //不会刷新页面  
history.pushState({},"","home")  //不会刷新页面，类似与栈结构压入
history.back()  //从类似栈中取出，类似于返回
history.replaceState({},"","home") //直接跳转，不能返回
history.go(-1)  //返回几步或前进几步

```

## 3. vue 中的路由

### 3.1 vue-router 的概念

vue-router 是 Vue.js 的官方路由插件，他和     Vue 是深度集成的，适合构建单页面复应用。

vue-router 是基于路由和组件的：

- 路由用于设定访问的路径，将路径和组件映射起来
- 在 vue-router 的单页面应用中，页面的路径的盖面那就是组件的切换

### 3.2 创建路由

安装：

```shell
npm install vue-router --save
```

使用：

- 在 src 目录下创建 router 文件夹，在 router 文件夹下创建 index.js 文件
- 导入路由对象，并调用 Vue.use(VueRouter)
- 创建路由实例，并传入路由映射配置
- 在 Vue 实例中挂载创建的路由实例

```javascript
// 在router.js 中创建路由
import { createRouter,createWebHistory} from 'vue-router'

// 路由规则
const routes = [

]
// 创建 index 对象
const router = createRouter({
  // history 用来选择不同的路由模式
  history:createWebHistory(),
  routes,
})

export default router
```

```javascript
// 在 main.js 中挂载路由
import { createApp } from 'vue'
import App from './App.vue'
import './index.css'
import router from './router'
createApp(App).use(router).mount('#app')
```

需要注意的是 vue3（vue-router4）与 vue2（vue-router3）中，创建路由的方式不同，这篇笔记是按照vue3来记录的

### 3.3 路由模式

Hash 模式：

在内部传递的实际 URL 之前使用了一个哈希字符（`#`）（类似于锚点）。由于这部分 URL 从未被发送到服务器，所以它不需要在服务器层面上进行任何特殊处理。也不会返回404错误

hash模式背后的原理是`onhashchange`事件,可以在window对象上监听这个事件

history 模式：

利用了 HTML5 History Interface 中新增的 pushState() 和 replaceState() 方法。这两个方法应用于浏览器的历史记录栈，在当前已有的 back()、forward()、go() 方法的基础之上，这两个方法提供了对历史记录进行修改的功能。当这两个方法执行修改时，只能改变当前地址栏的 URL，但浏览器不会向后端发送请求，也不会触发popstate事件的执行。

在vue-router 中使用 history 来选择使用那种模式：

Hash 模式 ：createWebHashHistory

history 模式： createWebHistory

## 4. 路由API







